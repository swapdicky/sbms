/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal){function DropButton(dropbutton,settings){const options=$.extend({title:Drupal.t('List additional actions')},settings);const $dropbutton=$(dropbutton);this.$dropbutton=$dropbutton;this.$list=$dropbutton.find('.dropbutton');this.$actions=this.$list.find('li').addClass('dropbutton-action');if(this.$actions.length>1){const $primary=this.$actions.slice(0,1);const $secondary=this.$actions.slice(1);$secondary.addClass('secondary-action');$primary.after(Drupal.theme('dropbuttonToggle',options));this.$dropbutton.addClass('dropbutton-multiple').on({'mouseleave.dropbutton':this.hoverOut.bind(this),'mouseenter.dropbutton':this.hoverIn.bind(this),'focusout.dropbutton':this.focusOut.bind(this),'focusin.dropbutton':this.focusIn.bind(this)});}else this.$dropbutton.addClass('dropbutton-single');}function dropbuttonClickHandler(e){e.preventDefault();$(e.target).closest('.dropbutton-wrapper').toggleClass('open');}Drupal.behaviors.dropButton={attach(context,settings){const dropbuttons=once('dropbutton','.dropbutton-wrapper',context);if(dropbuttons.length){const body=once('dropbutton-click','body');if(body.length)$(body).on('click','.dropbutton-toggle',dropbuttonClickHandler);dropbuttons.forEach((dropbutton)=>{DropButton.dropbuttons.push(new DropButton(dropbutton,settings.dropbutton));});}}};$.extend(DropButton,{dropbuttons:[]});$.extend(DropButton.prototype,{toggle(show){const isBool=typeof show==='boolean';show=isBool?show:!this.$dropbutton.hasClass('open');this.$dropbutton.toggleClass('open',show);},hoverIn(){if(this.timerID)window.clearTimeout(this.timerID);},hoverOut(){this.timerID=window.setTimeout(this.close.bind(this),500);},open(){this.toggle(true);},close(){this.toggle(false);},focusOut(e){this.hoverOut.call(this,e);},focusIn(e){this.hoverIn.call(this,e);}});$.extend(Drupal.theme,{dropbuttonToggle(options){return `<li class="dropbutton-toggle"><button type="button"><span class="dropbutton-arrow"><span class="visually-hidden">${options.title}</span></span></button></li>`;}});Drupal.DropButton=DropButton;})(jQuery,Drupal);;
((Drupal)=>{Drupal.theme.dropbuttonToggle=(options)=>`<li class="dropbutton-toggle"><button type="button" class="dropbutton__toggle"><span class="visually-hidden">${options.title}</span></button></li>`;})(Drupal);;
((Drupal,once)=>{Drupal.behaviors.ginDropbutton={attach:function(context){once("ginDropbutton",".dropbutton-multiple:has(.dropbutton--gin)",context).forEach(((el)=>{el.querySelector(".dropbutton__toggle").addEventListener("click",(()=>{this.updatePosition(el),window.addEventListener("scroll",(()=>Drupal.debounce(this.updatePositionIfOpen(el),100))),window.addEventListener("resize",(()=>Drupal.debounce(this.updatePositionIfOpen(el),100)));}));}));},updatePosition:function(el){const preferredDir=document.documentElement.dir??"ltr",secondaryAction=el.querySelector(".secondary-action"),dropMenu=el.querySelector(".dropbutton__items"),toggleHeight=el.offsetHeight,dropMenuWidth=dropMenu.offsetWidth,dropMenuHeight=dropMenu.offsetHeight,boundingRect=secondaryAction.getBoundingClientRect(),spaceBelow=window.innerHeight-boundingRect.bottom,spaceLeft=boundingRect.left,spaceRight=window.innerWidth-boundingRect.right;dropMenu.style.position="fixed";const leftAlignStyles={left:`${boundingRect.left}px`,right:"auto"},rightAlignStyles={left:"auto",right:window.innerWidth-boundingRect.right+"px"};"ltr"===preferredDir?spaceRight>=dropMenuWidth?Object.assign(dropMenu.style,leftAlignStyles):Object.assign(dropMenu.style,rightAlignStyles):spaceLeft>=dropMenuWidth?Object.assign(dropMenu.style,rightAlignStyles):Object.assign(dropMenu.style,leftAlignStyles),dropMenu.style.top=spaceBelow>=dropMenuHeight?`${boundingRect.bottom}px`:boundingRect.top-toggleHeight-dropMenuHeight+"px";},updatePositionIfOpen:function(el){el.classList.contains("open")&&this.updatePosition(el);}};})(Drupal,once);;
